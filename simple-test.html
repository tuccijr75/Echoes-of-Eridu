<!DOCTYPE html>
<html>
<head>
    <title>Simple GLB Test</title>
    <style>
        canvas { width: 400px; height: 400px; border: 1px solid #ccc; }
        .log { margin: 10px 0; padding: 5px; background: #f0f0f0; font-family: monospace; }
    </style>
</head>
<body>
    <h1>Simple GLB Test</h1>
    <canvas id="canvas"></canvas>
    <div id="log"></div>
    <script type="module">
        const canvas = document.getElementById('canvas');
        const logDiv = document.getElementById('log');
        
        function log(message) {
            console.log(message);
            logDiv.innerHTML += '<div class="log">' + message + '</div>';
        }
        
        async function test() {
            try {
                log('Starting test...');
                
                // Test direct fetch first
                log('Testing direct fetch...');
                const response = await fetch('models/adamu/model.glb');
                if (!response.ok) {
                    log('❌ Direct fetch failed: ' + response.status);
                    return;
                }
                log('✅ Direct fetch successful');
                
                // Load Three.js
                log('Loading Three.js...');
                const THREE = await import('./libs/three.module.js');
                log('✅ Three.js loaded');
                
                // Load GLTFLoader
                log('Loading GLTFLoader...');
                const { GLTFLoader } = await import('./libs/GLTFLoader.js');
                log('✅ GLTFLoader loaded');
                
                // Create scene
                const scene = new THREE.Scene();
                const camera = new THREE.PerspectiveCamera(75, 1, 0.1, 1000);
                const renderer = new THREE.WebGLRenderer({ canvas });
                renderer.setSize(400, 400);
                
                // Add lights
                scene.add(new THREE.HemisphereLight(0xffffff, 0x404040, 0.8));
                const dir = new THREE.DirectionalLight(0xffffff, 0.9);
                dir.position.set(4, 6, 8);
                scene.add(dir);
                
                // Load model
                log('Loading GLB model...');
                const loader = new GLTFLoader();
                
                loader.load(
                    'models/adamu/model.glb',
                    (gltf) => {
                        log('✅ GLB loaded successfully!');
                        log('Scene: ' + (gltf.scene ? 'present' : 'missing'));
                        log('Scenes: ' + (gltf.scenes ? gltf.scenes.length : 0));
                        
                        if (gltf.scene) {
                            scene.add(gltf.scene);
                            camera.position.set(3, 1.8, 4);
                            camera.lookAt(0, 0, 0);
                            renderer.render(scene, camera);
                            log('✅ Model rendered!');
                        }
                    },
                    (progress) => {
                        if (progress.total > 0) {
                            log('Loading: ' + Math.round(progress.loaded / progress.total * 100) + '%');
                        }
                    },
                    (error) => {
                        log('❌ GLB loading failed: ' + error.message);
                        log('Error details: ' + JSON.stringify(error));
                        console.error('GLTFLoader error:', error);
                    }
                );
                
            } catch (error) {
                log('❌ Test failed: ' + error.message);
                console.error('Test error:', error);
            }
        }
        
        test();
    </script>
</body>
</html>